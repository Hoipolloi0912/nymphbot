import requests

def get_token():
    #https://myanimelist.net/v1/oauth2/authorize?response_type=code&client_id=863dfd06ac761d3c7fbb118cb9ae5555&code_challenge=abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcd&code_challenge_method=plain
    url = "https://myanimelist.net/v1/oauth2/token"
    data = {
        "grant_type": "authorization_code",
        "client_id": "863dfd06ac761d3c7fbb118cb9ae5555",
        "client_secret": "6eb9e947557ca0bca2ccf61a2fe6f69e0f29941eec9e1fa94e70f21b6d79aeab",
        "code": "def50200d8b935a3d3388031dff9f3a51f88ce61fb507948323e361dfc0e17169d253347587ec2db0db7bfee8c814adb7f87bbebe71dfdfa90040269807f966d6974a166114ef9a79faa6cd80a3064ec573008d6a65b87cec8ab746733f6627e8a728f56bd49abd14e458fe24da2088d2e90a9ce4a4df635ad6b0113c1e633d54f9dadc230d71790fe24244d67a7b20796a8e9607ee988c75be72dc4eb53fdecdfd56d4d50c9f359f21769654a838ebad11caff3efc8ba500df25dc230b7bb2a31267938cb82dce39f74a3943217948f8f19231772ed58d31f1f85c4e8c0942f234cf6d09bc00788188fb1a1034b824943e51b5048e0cfd5e5a01106d1e9513faa4939984cfba98c3a2edf567e4c32b61b70da26f19d6978b571cbf14fb23d0e2e0acb7c422ed13e67a6aa8d0a56c6648f1afb2bfa9824c4cec518469f20fe1879ad8da14f121563afb179abb536f3480c8a2e0a878e985f979f81f32defcfe7bcc33abd4870a026b3059a777a333f8941fda55fd5a5aa4125044a171dfb07bff77e435313b39f427aa0fb7ca66ecfbbf4d96fdf9a56cfe934e7f9ab3d8ca2b60b2dee52668fbaf528edd6cee2bbf78c",
        "code_verifier": "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890abcd"
    }

    response = requests.post(url, data=data)
    print(response.json())

def test():
    access_token = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImM0ZjUxMWNjZWNjY2I3ZjZhNzUyZWZhZDljMjNhMGI5Njg2OGE2NzhjNDFhMTE2MGRkZDhiYWI0ODI0ZDdiZTQ4MTdiMDI2NTMwZDA0ZmMyIn0.eyJhdWQiOiI4NjNkZmQwNmFjNzYxZDNjN2ZiYjExOGNiOWFlNTU1NSIsImp0aSI6ImM0ZjUxMWNjZWNjY2I3ZjZhNzUyZWZhZDljMjNhMGI5Njg2OGE2NzhjNDFhMTE2MGRkZDhiYWI0ODI0ZDdiZTQ4MTdiMDI2NTMwZDA0ZmMyIiwiaWF0IjoxNzUyNTE0MTkzLCJuYmYiOjE3NTI1MTQxOTMsImV4cCI6MTc1NTE5MjU5Mywic3ViIjoiMTU2ODQxMjMiLCJzY29wZXMiOltdfQ.H2e8jJ2iiU_EotFtK2aUl1PcH5W5h_nnx9shbRwpoH6DipWem2J3FieBW_FP2alO0lAm1cEtxwQEVz1_UHHS_y9Yk8lKvXdy0KPWLzF2YxxXABoNzOJHdKiRR6CCjdPnTxn_SjEhage6BHsfoO5XjICBHX45QMBwRKWACFnpeRphFBGogCdmOZhFvnBm8Vn2DBxMF7wb-25-fAQBgeveFYaaVPbn8R41IjA5btQFEgZTWTqG-q36e8NXCdfcZSO0xo3a6GrW4jXRTJf_RoEx7Wb5zYOL7K3BjelxN6wue4jWo4nPQBmIjpfqD3-Bj2GLg-31ee0l5MtmbL2BjygYcQ'
    refresh_token = 'def502002540ceb1ed5df0acd2badb2b580a5e31363d7cbd6336314d956cc8b684fa4d349e19b58f472e1d7f379ac0899657ad1e15cc340a262e454d8fa4e19ee457636d6fedcd562cf6ed6d2be8c2bd0287162a931e57161b3490efaacfa5bd02de6f558936b8901750025cbabe7818fa59178a36fddc404fc519763018e715bd1b8b6e9c846d0ffd5df707b5a84e94667f168ff157ebc28bdb3ce15f0d6d6fd6cbf5e51743087de86a325fa557bfb96fcb1b2046fb7a1d3bc4f9213f0c726591da5bac2d53344be510c50f9b7bb0f56434361dcd3aa4dc8f6295fd8e4f7b5ab8fa3efe40dc537899156f81f88af6684e8afa61338a691d6ecfa6d3989838eb0258ef83d5486fc47beecba8ccfb1a172c48d8d88489053bfa268ff6013fb901d1cd61cba393e3f570f2283d2d92ab42bd6ecadb2d8d70e4745f722f17e776df2a7e67d78fb89614fde74f9b454f2503a1ea3dc053e45e7325e6c4d412209eaadfb2a508abe74eb87eafabaf9cdfe5ff83c09edba0d87548dc6c0f2eddb841de0e5d40347ddd3a3c5c'

    headers = {
        "Authorization": f"Bearer {access_token}"
    }

    params = {"limit":100,
            "fields":"list_status,anime{id}"}

    resp = requests.get("https://api.myanimelist.net/v2/users/kevinpro912/animelist", headers=headers,params=params)
    print(resp.json())

test()